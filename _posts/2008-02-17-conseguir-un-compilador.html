---
layout: post
title: Conseguir un compilador
date: 2008-02-17
category: cpp
tags: [cpp, programacion, gcc, mingw, instalacion]
---

<div class='post'>
<blockquote>
  <p><b>Editado 21 de mayo 2011</b>: Este post se encuentra aquí sólo a fines históricos, ahora usted puede usar el <a href="http://sourceforge.net/projects/mingw/files/Automated%20MinGW%20Installer/mingw-get-inst">instalador automático de MinGW</a>.</p>
  <p><b>Editado 9 de septiembre 2010</b>: Aunque este post contiene información útil de cómo instalar MinGW con gcc 3.4, tal vez prefiera antes probar este <a href="http://cmasomenos.blogspot.com/2010/06/descargar-mingw-con-gcc-45.html">nuevo post sobre cómo descargar MinGW con gcc 4.5 de forma automática</a>.</p>
</blockquote>
<p>En este blog vamos a hablar sobre los lenguajes de programación C y C++, y cómo usar software GNU para hacer aplicaciones. También voy a tratar de investigar algo de ensamblador.<br /><p>De todas formas, para evitar hacer un primer post completamente inútil "de presentación", voy a pasar a explicarles cómo pueden instalar un compilador gratuito en Windows desde cero, y hacer un pequeño programa <span style="font-style: italic;">"Hola Mundo"</span> sin pensar mucho (eso sí, van a tener que leer un poco). El proceso para Linux es más sencillo, ya que el compilador suele venir instalado por defecto en la mayoría de las distribuciones.<br /><p>Primero, algunas definiciones importantes:<br /><ul><li><a href="http://www.mingw.org/" style="font-weight: bold;">MinGW</a>: Un conjunto de programas y bibliotecas que permiten crear aplicaciones para Windows.</li><li><a href="http://gcc.gnu.org/" style="font-weight: bold;">GCC</a>: El compilador. Transforma código escrito en C/C++ a un archivo ejecutable (.exe). En realidad hace miles de maravillas más, pero por ahora nos vamos a quedar con esta definición.</li><li><span style="font-weight: bold;">MSYS</span>: Es un conjunto mínimo de programas para poder ejecutar scripts <span style="font-style: italic;">"a la"</span> Unix. Además incluye una terminal que emula un pequeño entorno GNU/Linux.</li><li><a href="http://www.gnu.org/software/emacs/" style="font-weight: bold;">Emacs</a>: La madre de los editores de texto. Alguna vez dije que era una porquería o muy complicado, y que conviene usar editores como el <a href="http://sourceforge.net/projects/rhide">RHIDE</a> o <a href="http://setedit.sourceforge.net/">Setedit</a>. Bueno, la cosa es que con "<span style="font-style: italic;">un poco</span>" de práctica uno comprende el poder de esta herramienta.</li><li><span style="font-weight: bold;">make</span>: Un programa que puede compilar muchos archivos y linkearlos en un ejecutable de forma automatizada (siempre y cuando le escribamos un archivo con las órdenes adecuadas). Generalmente los programadores están acostumbrados a utilizar un <a href="http://es.wikipedia.org/wiki/Entorno_de_desarrollo_integrado">IDE</a> (como el <a href="http://www.bloodshed.net/devcpp.html">DevC++</a>) que maneje el proyecto, calcule las dependencias entre archivos, compile todo lo necesario, linkee, ejecute y depure. Si bien esto es cómodo, espero poder enseñarles a automatizar la compilación y liberarlos de un determinado IDE para compilar los programas.</li><li><span style="font-weight: bold;">cmd.exe</span>: Es la línea de comandos de Windows. Si nunca lo utilizó, es hora que se ponga a usarlo. Para iniciar la línea de comandos debe ir al menú "Inicio/Ejecutar..." e introducir "cmd". ¿Cómo se usa? Bueno, <a href="http://www.google.com.ar/search?q=introduccion+al+shell+de+comandos+cmd.exe">empiece a buscar...</a></li></ul>Ahora nos dedicaremos a instalar el MinGW, para eso debe comenzar a bajarse los siguientes archivos (si no sabe <a href="http://www.7-zip.org/">cómo descomprimir un archivo .tar.gz...</a>):<br /><ul><li><a href="http://downloads.sourceforge.net/mingw/mingw-runtime-3.13.tar.gz?download">mingw-runtime-3.13.tar.gz</a>: Los archivos de cabecera y bibliotecas estándares (stdio.h, math.h, libc, libm, etc.)    </li><li><a href="http://downloads.sourceforge.net/mingw/w32api-3.10.tar.gz?download">w32api-3.10.tar.gz</a>: Archivos de cabecera del API de Win32</li><li><a href="http://downloads.sourceforge.net/mingw/gcc-core-3.4.5-20060117-1.tar.gz?download">gcc-core-3.4.5-20060117-1.tar.gz</a>: El preprocesador de C y el compilador de C</li><li><a href="http://downloads.sourceforge.net/mingw/gcc-g++-3.4.5-20060117-1.tar.gz?download">gcc-g++-3.4.5-20060117-1.tar.gz</a>: El compilador de C++ y los archivos de cabecera de C++</li><li><a href="http://downloads.sourceforge.net/mingw/binutils-2.17.50-20060824-1.tar.gz?download">binutils-2.17.50-20060824-1.tar.gz</a>: Varios programas utilitarios que sirve para diferentes propósitos (ej: quitar símbolos de depuración con <span style="font-style: italic;">strip</span>, convertir direcciones a líneas de código fuente con <span style="font-style: italic;">addr2line</span>, procesar la información de <a href="http://en.wikipedia.org/wiki/Performance_analysis">rendimiento</a> con <span style="font-style: italic;">gprof</span>, crear librerías con <span style="font-style: italic;">ar</span>, compilar los archivos de recursos de Windows con <span style="font-style: italic;">windres</span>, etc.).</li><li><a href="http://downloads.sourceforge.net/mingw/mingw32-make-3.81-2.tar.gz?download">mingw32-make-3.81-2.tar.gz</a>: La utilidad <span style="font-style: italic;">make</span></li><li><a href="http://downloads.sourceforge.net/mingw/gdb-5.2.1-1.exe?download">gdb-5.2.1-1.exe</a>: El depurador de código</li></ul>Una vez que consiga todos estos archivos, debe crear una carpeta C:\MinGW (le recomiendo esa ubicación) y descomprimir todo ahí mismo. Para instalar el depurador (gdb) deberá ejecutar el instalador, seguir los pasos, y colocar como carpeta de instalación "C:\MinGW".<br /><p>Una vez instalado todo, usted ya está en condiciones para compilar código en C o C++. Antes verifique que en dicha carpeta tiene una estructura de directorios como la siguiente:<br /><pre class="console">C:\MinGW<br />  bin\<br />  doc\<br />  include\<br />  info\<br />  lib\<br />  libexec\<br />  man\<br />  mingw32\<br /></pre>Si así es, significa que todo salió bien (bueno, tampoco descomprimir unos archivos es algo tan complicado).<br /><p>Para estar seguros que el compilador funcione, vamos a crear el programa de prueba por excelencia, el "Hola Mundo". Abra el bloc de notas (Inicio/Ejecutar/notepad) y escriba en un archivo el siguiente código:<br /><pre class="prettyprint">#include &lt;stdio.h&gt;<br /><br />int main(int argc, char *argv[])<br />{<br />  printf("Hola Mundo\n");<br />  return 0;<br />}<br /></pre>Guarde el archivo como "<span style="font-style: italic;">C:\MinGW\hola.c</span>". Ahora abra la línea de comandos <span style="font-weight: bold;">cmd.exe</span>, y ahí mismo ejecute los siguientes comandos:<br /><pre class="console">cd C:\MinGW<br />set PATH=C:\MinGW\bin;%PATH%<br />gcc hola.c<br /></pre>Verá que el archivo "<span style="font-style: italic;">a.exe</span>" se crea en el directorio C:\MinGW. Si ejecuta el programa <span style="font-weight: bold;">a.exe</span> visualizará en la salida de la consola el mensaje más estúpido jamás escrito: "<span style="font-style: italic;">Hola Mundo</span>"<br /><pre class="console">C:\MinGW&gt;a.exe<br />Hola Mundo<br /></pre>A continuación le paso a explicar qué hicimos en esta ráfaga de pasos:<br /><ul><li>"cd C:\MinGW" es para ubicarnos en el directorio donde se encuentra el archivo o proyecto que queremos compilar (si no sabía esto, es porque todavía no estuvo buscando cómo usar cmd.exe...).</li><li>"set PATH=C:\MinGW\bin;%PATH%" es un conjunto de varias cosas: "<span style="font-style: italic;">PATH</span>" es una variable de entorno que indica cuáles son los directorios donde podemos encontrar archivos ejecutables (archivos ejecutables como <span style="font-style: italic;">gcc.exe</span>, <span style="font-style: italic;">cpp.exe</span>, etc.); "<span style="font-style: italic;">set</span>" es un comando del shell para cambiar el valor de una variable de entorno; y "<span style="font-style: italic;">%PATH%</span>" devuelve el valor de dicha variable de entorno. Por lo tanto, lo único que estamos haciendo aquí es agregar una nueva ruta (C:\MinGW\bin) a PATH para que el shell encuentre los archivos ejecutables que a nosotros nos interesa (el preprocesador, compilador, etc.). Si desea ver dónde busca el shell los archivos ejecutables actualmente, puede usar el siguiente comando: "<span style="font-style: italic;">echo %PATH%</span>"</li><li>"gcc hola.c" compila el programa "hola.c" y deja el resultado (<span style="font-style: italic;">linkea</span> o <span style="font-style: italic;">linkedita</span>) en un archivo llamado "a.exe" (o "a.out" en Linux). En otros posts veremos cómo podemos especificar un nombre distinto a este archivo de salida.</li></ul>De todo lo visto, lo más molesto es la configuración de la variable de entorno, es decir, si pensamos compilar varias veces, cada vez que abramos un shell (cmd.exe) deberemos hacer un "set PATH=C:\MinGW\bin;%PATH%". Para evitar este paso tenemos dos opciones:<br /><ol><li>Si tiene accesos de Administrador, puede hacer click derecho sobre "Mi PC", "Propiedades", "Opciones Avanzadas", "Variables de Entorno" y modificar la variable PATH agregándole el valor "C:\MinGW\bin" (recuerde no tocar las demás rutas, además de agregar un ";" para separar las distintas rutas entre sí).</li><li>En otro caso, puede crearse un archivo de comandos por lotes mi-mingw.bat para iniciar el shell adecuadamente con el PATH ya configurado. Por ejemplo, un mi-mingw.bat posible podría ser:<br /><pre class="console">set PATH=C:\MinGW\bin;%PATH%<br />start cmd.exe<br /></pre>Este archivo podemos dejarlo en el Escritorio y cada vez que tengamos ganas de compilar, con un simple doble click ya podemos empezar. Inclusive, en vez de iniciar "start cmd.exe" podríamos iniciar algún IDE o editor de texto como Emacs. Pero eso para otro post.</li></ol>Bueno, por hoy me cansé. Cualquier problema o pregunta que tengan, los comentarios están abiertos (y bien moderados :)
</div>
